import{c as e,g as t,_ as n,j as r,U as a,F as i,W as s,A as o,ak as u,h as c,k as l,av as h,aw as d,a8 as p,Q as f,V as m,ax as v,ay as _,az as y,T as g,aA as E,aB as T,d as U,e as I,ao as w,S as N,aC as C,z as M,aD as A,aE as S,ap as b,aq as P,aF as D,ad as R,p as L,K as q,ac as k,af as H,u as F,ai as O,a5 as Q,ae as G,w as V,ag as z,Y as x,X as j,a as Y,Z as B,at as W,I as K,b as Z,aG as J,aH as X,q as $,o as ee,aI as te,aJ as ne,aK as re,aL as ae,aM as ie,N as se,aN as oe}from"./__bundle-a953c60c.js";var ue;!function(e){e.MUTED="muted",e.BANNED="banned"}(ue||(ue={}));var ce,le=function(){function n(t){var n,r,a;this.restrictionType=null,this.description=null,this.endAt=-1,e(ue,t.restriction_type)&&(this.restrictionType=t.restriction_type),this.description=null!==(n=t.description)&&void 0!==n?n:null,this.endAt=null!==(a=null!==(r=t.end_at)&&void 0!==r?r:t.muted_end_at)&&void 0!==a?a:-1}return n.payloadify=function(e){return e?t({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt}):null},n}(),he=function(e){function a(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=null,r.restrictionInfo=new le(n),r}return n(a,e),a.payloadify=function(n){return n?t(r(r({},e.payloadify.call(this,n)),le.payloadify(n.restrictionInfo))):null},a}(a);!function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE"}(ce||(ce={}));var de=function(){function e(e){this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=e.data,this.ts=e.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===i.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===i.OPEN},enumerable:!1,configurable:!0}),e}(),pe=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.event=new de(r),a}return n(t,e),t}(s),fe=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,s=r.data.operators,o=void 0===s?[]:s;return i.operators=o.map((function(e){return new a(i._iid,e)})),i}return n(t,e),t}(pe),me=function(e){function t(t,n,r){var a=e.call(this,t,"MCNT",r)||this;return a.groupChannelMemberCounts=r.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),a.openChannelMemberCounts=r.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),a}return n(t,e),t}(s),ve=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId,s=t.seconds,c=t.description;return(n=e.call(this)||this).method=o.POST,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:i,seconds:s,description:c},n}return n(t,e),t}(c);!function(e){function t(t,n){return e.call(this,t,n)||this}n(t,e)}(l);var _e=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new he(t,r.data),a}return n(t,e),t}(s),ye=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=o.DELETE,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(i)),n}return n(t,e),t}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var ge=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new he(t,r.data),a}return n(t,e),t}(s),Ee=function(e){function r(n){var r=this,a=n.channelUrl,i=n.channelType,s=n.userId,c=n.seconds,l=n.description;return(r=e.call(this)||this).method=o.POST,r.path="".concat(u(i),"/").concat(encodeURIComponent(a),"/ban"),r.params=t({user_id:s,seconds:c,description:l}),r}return n(r,e),r}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var Te=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.memberCount=null,a.joinedMemberCount=null,a.user=new he(t,r.data),r.data.member_count&&(a.memberCount=r.data.member_count),r.data.joined_member_count&&(a.joinedMemberCount=r.data.joined_member_count),a}return n(t,e),t}(s),Ue=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=o.DELETE,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(i)),n}return n(t,e),t}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var Ie=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new he(t,r.data),a}return n(t,e),t}(s),we=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.freezing;return(n=e.call(this)||this).method=o.PUT,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:i},n}return n(t,e),t}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var Ne=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.freeze=r.data.freeze,a}return n(t,e),t}(s),Ce=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metadata,s=t.upsert;return(n=e.call(this)||this).method=o.PUT,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:i,include_ts:!0,upsert:null!=s&&s},n}return n(t,e),t}(c),Me=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.metadata,i=n.ts;return r.metadata=a,r.ts=null!=i?i:null,r}return n(t,e),t}(l),Ae=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.created=null,a.updated=null,a.deleted=null,r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return n(t,e),t}(s),Se=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter,s=t.upsert,c=void 0!==s&&s,l=t.mode,h=void 0===l?"set":l;return(n=e.call(this)||this).method=o.PUT,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i,upsert:c,mode:h},n}return n(t,e),t}(c),be=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return n(t,e),t}(l),Pe=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.created=null,a.updated=null,a.deleted=null,r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return n(t,e),t}(s),De=function(e){function r(n){return e.call(this,{code:"MESG",ackRequired:!0,payload:t({channel_url:n.channelUrl,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrays,mention_type:n.mentionType,mentioned_user_ids:n.mentionType===h.USERS?n.mentionedUserIds:[],mentioned_message_template:n.mentionedMessageTemplate,target_langs:n.translationTargetLanguages,push_option:n.pushNotificationDeliveryOption&&n.pushNotificationDeliveryOption!==d.DEFAULT?n.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:n.appleCriticalAlertOptions,silent:n.silent,is_reply_to_channel:n.isReplyToChannel,parent_message_id:n.parentMessageId>0?n.parentMessageId:null,req_id:n.requestId})})||this}return n(r,e),r}(p),Re=function(e){function t(t,n,r){var a,i=this;(i=e.call(this,t,"MESG",r)||this).message=new f(t,r);var s=m.of(t).sdkState;return i.isMentioned=v(i.message.mentionType,i.message.mentionedUsers.map((function(e){return e.userId})),s.userId),i.forceUpdateLastMessage=null!==(a=r.force_update_last_message)&&void 0!==a&&a,i}return n(t,e),t}(s),Le=function(e){function t(t,n,r){var a,i=this;(i=e.call(this,t,"ADMM",r)||this).message=new _(t,r);var s=m.of(t).sdkState;return i.isMentioned=v(i.message.mentionType,i.message.mentionedUsers.map((function(e){return e.userId})),s.userId),i.forceUpdateLastMessage=null!==(a=r.force_update_last_message)&&void 0!==a&&a,i}return n(t,e),t}(s),qe=function(e){function r(n){return e.call(this,{code:"MEDI",ackRequired:!0,payload:t({channel_url:n.channelUrl,msg_id:n.messageId,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:n.mentionType===h.USERS?n.mentionedUserIds:[],mentioned_message_template:n.mentionedMessageTemplate,apple_critical_alert_options:n.appleCriticalAlertOptions})})||this}return n(r,e),r}(p),ke=function(e){function t(t,n,r){var a,i,s,o,u=this;(u=e.call(this,t,"MEDI",r)||this).message=new f(t,r);var c=m.of(t).sdkState;return u.mentionCountChange=y({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:u.message.mentionType,mentionedUserIds:u.message.mentionedUsers.map((function(e){return e.userId}))},c.userId),u}return n(t,e),t}(s),He=function(e){function r(n){return e.call(this,{code:"FEDI",ackRequired:!0,payload:t({channel_url:n.channelUrl,msg_id:n.messageId,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:n.mentionType===h.USERS?n.mentionedUserIds:[],apple_critical_alert_options:n.appleCriticalAlertOptions})})||this}return n(r,e),r}(p),Fe=function(e){function t(t,n,r){var a,i,s,o,u=this;(u=e.call(this,t,"FEDI",r)||this).message=new g(t,r);var c=m.of(t).sdkState;return u.mentionCountChange=y({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:u.message.mentionType,mentionedUserIds:u.message.mentionedUsers.map((function(e){return e.userId}))},c.userId),u}return n(t,e),t}(s),Oe=function(e){function t(t,n,r){var a,i,s,o,u=this;(u=e.call(this,t,"AEDI",r)||this).message=new _(t,r);var c=m.of(t).sdkState;return u.mentionCountChange=y({mentionType:null!==(i=null===(a=r.old_values)||void 0===a?void 0:a.mention_type)&&void 0!==i?i:null,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},{mentionType:u.message.mentionType,mentionedUserIds:u.message.mentionedUsers.map((function(e){return e.userId}))},c.userId),u}return n(t,e),t}(s),Qe=function(e){function t(t){var n=e.call(this)||this;return n.method=o.DELETE,n.path="".concat(u(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return n(t,e),t}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var Ge,Ve=function(e){function t(t,n,r){var a=e.call(this,t,"DELM",r)||this;return a.channelUrl=r.channel_url,a.channelType=r.channel_type,a.messageId=Number(r.msg_id),a}return n(t,e),t}(s),ze=function(e){function t(t,n,r){var a=e.call(this,t,"MRCT",r)||this;return a.channelUrl=r.channel_url,a.channelType=r.channel_type,a.event=new E(r),a}return n(t,e),t}(s),xe=function(e){function t(t,n,r){var a=e.call(this,t,"MTHD",r)||this;return a.event=new T(t,r),a}return n(t,e),t}(s),je=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.token,i=t.limit,s=e.call(this)||this;return s.method=o.GET,s.path="".concat(u(r),"/").concat(encodeURIComponent(n),"/operators"),s.params={token:a,limit:i},s}return n(t,e),t}(c),Ye=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new a(t,e)})),r.token=n.next,r}return n(t,e),t}(l),Be=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return n(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return U(this,void 0,void 0,(function(){var e,t,n,a,i,s,o;return I(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=m.of(this._iid).requestQueue,n=new je(r(r({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return a=u.sent(),i=a.as(Ye),s=i.operators,o=i.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,e];case 3:throw N.queryInProgress;case 4:return[3,6];case 5:throw N.invalidParameters;case 6:return[2]}}))}))},t}(w),We=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.limit,s=t.token;return(n=e.call(this)||this).method=o.GET,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:i,token:s},n}return n(t,e),t}(c),Ke=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.mutedUsers=[];var a=n.next,i=n.muted_list;return r.token=a,i&&i.length>0&&(r.mutedUsers=i.map((function(e){return new he(t,e)}))),r}return n(t,e),t}(l),Ze=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return n(t,e),t.prototype.next=function(){return U(this,void 0,void 0,(function(){var e,t,n,a,i,s;return I(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=m.of(this._iid).requestQueue,t=new We(r(r({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),a=n.as(Ke),i=a.mutedUsers,s=a.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw N.queryInProgress;case 4:return[3,6];case 5:throw N.invalidParameters;case 6:return[2]}}))}))},t}(w),Je=function(e){function r(n){var r=this,a=n.channelUrl,i=n.channelType,s=n.limit,c=n.token;return(r=e.call(this)||this).method=o.GET,r.path="".concat(u(i),"/").concat(encodeURIComponent(a),"/ban"),r.params=t({limit:s,token:c}),r}return n(r,e),r}(c),Xe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.bannedUsers=[];var a=n.next,i=n.banned_list;return r.token=a,i&&i.length>0&&(r.bannedUsers=i.map((function(e){return new he(t,e.user)}))),r}return n(t,e),t}(l),$e=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return n(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return U(this,void 0,void 0,(function(){var e,t,n,a,i,s;return I(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=m.of(this._iid).requestQueue,t=new Je(r(r({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),a=n.as(Xe),i=a.bannedUsers,s=a.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw N.queryInProgress;case 4:return[3,6];case 5:throw N.invalidParameters;case 6:return[2]}}))}))},t}(w);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(Ge||(Ge={}));var et=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=o.POST,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return n(t,e),t}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var tt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=o.DELETE,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return n(t,e),t}(c);!function(e){function t(t,n){return e.call(this,t,n)||this}n(t,e)}(l);var nt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=o.GET,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/mute/").concat(i),n}return n(t,e),t}(c),rt=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=null,r.endAt=null,r.remainingDuration=null,r.description=null;var a=n.is_muted,i=n.start_at,s=n.end_at,o=n.remaining_duration,u=n.description;return r.isMuted=a,r.startAt=i,r.endAt=s,r.remainingDuration=o,r.description=u,r}return n(t,e),t}(l),at=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=o.GET,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:i,include_ts:!0},n}return n(t,e),t}(c),it=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.metadata,i=n.ts;return r.metadata=a,r.ts=null!=i?i:null,r}return n(t,e),t}(l),st=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=o.DELETE,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metadata/").concat(i),n.params={include_ts:!0},n}return n(t,e),t}(c),ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.ts;return r.ts=null!=a?a:null,r}return n(t,e),t}(l),ut=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=o.PUT,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return n(t,e),t}(c),ct=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var a=n.ts;return r.ts=null!=a?a:null,r}return n(t,e),t}(l),lt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=o.GET,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/ban"),n.params={keys:i},n}return n(t,e),t}(c),ht=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return n(t,e),t}(l),dt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter;return(n=e.call(this)||this).method=o.POST,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i},n}return n(t,e),t}(c),pt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return n(t,e),t}(l),ft=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=o.DELETE,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metacounter/").concat(i),n.params=null,n}return n(t,e),t}(c);!function(e){function t(t,n){return e.call(this,t,n)||this}n(t,e)}(l);var mt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=o.DELETE,n.path="".concat(u(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params=null,n}return n(t,e),t}(c);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(l);var vt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,u=t.description;return(n=e.call(this)||this).method=o.POST,n.path="".concat(C(a),"/").concat(encodeURIComponent(r)),n.params={report_category:i,reporting_user_id:s,report_description:u},n}return n(t,e),t}(c),_t=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,s=t.category,u=t.userId,c=t.offendingUserId,l=t.description;return(n=e.call(this)||this).method=o.POST,n.path="/report/users/".concat(c),n.params={channel_url:r,channel_type:a===i.OPEN?"open_channels":"group_channels",report_category:s,reporting_user_id:u,report_description:l},n}return n(t,e),t}(c),yt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,u=t.offendingUserId,c=t.messageId,l=t.description;return(n=e.call(this)||this).method=o.POST,n.path="".concat(C(a),"/").concat(encodeURIComponent(r),"/messages/").concat(c),n.params={report_category:i,reporting_user_id:s,report_description:l,offending_user_id:u},n}return n(t,e),t}(c),gt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=o.POST,s.path="".concat(u(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return n(t,e),t}(c),Et=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new E(n),r}return n(t,e),t}(l),Tt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=o.DELETE,s.path="".concat(u(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return n(t,e),t}(c),Ut=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.reactionEvent=new E(r({},n)),a}return n(t,e),t}(l),It=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.translationTargetLanguages,s=e.call(this)||this;return s.method=o.POST,s.path="".concat(u(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(a),"/translation"),s.params={target_langs:i},s}return n(t,e),t}(c),wt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new f(t,n),r}return n(t,e),t}(l),Nt=function(s){function o(e,t){var n,r,o,u,c=this;return(c=s.call(this,e)||this).url="",c.channelType=i.BASE,c.name="",c.coverUrl="",c.customType="",c.data="",c.isFrozen=!1,c.isEphemeral=!1,c.creator=null,c.createdAt=0,c.url=t.channel_url,c.name=null!==(n=t.name)&&void 0!==n?n:"",c.coverUrl=null!==(r=t.cover_url)&&void 0!==r?r:"",c.customType=null!==(o=t.custom_type)&&void 0!==o?o:"",c.data=null!==(u=t.data)&&void 0!==u?u:"",c.isFrozen=!!Y("boolean",t.freeze)&&t.freeze,c.isEphemeral=!!Y("boolean",t.is_ephemeral)&&t.is_ephemeral,c.creator=t.created_by?new a(c._iid,t.created_by):null,c.createdAt=1e3*t.created_at,c._cachedMetaData=new Map,t.metadata&&t.ts&&Object.keys(t.metadata).forEach((function(e){c._cachedMetaData.set(e,{value:t.metadata[e],isRemoved:!1,updatedAt:t.ts})})),c}return n(o,s),o.payloadify=function(e){return t(r(r({},s.payloadify.call(this,e)),{channel_url:e.url,name:e.name,cover_url:e.coverUrl,custom_type:e.customType,data:e.data,freeze:e.isFrozen,is_ephemeral:e.isEphemeral,created_by:a.payloadify(e.creator),created_at:e.createdAt/1e3}))},Object.defineProperty(o.prototype,"isGroupChannel",{get:function(){return this.channelType===i.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isOpenChannel",{get:function(){return this.channelType===i.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e},enumerable:!1,configurable:!0}),o.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){var a=n._cachedMetaData.get(r);(!a||a.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},o.prototype._removeFromCachedMetaData=function(e,t){var n=this;e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!1,r.updatedAt=t)}))},o.prototype._generateRequestId=function(){return"rq-".concat(M())},o.prototype.isIdentical=function(e){return e&&this.url===e.url},o.prototype.isEqual=function(e){return A(this,e)},o.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new Be(this._iid,this.url,this.channelType,e)},o.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new Ze(this._iid,this.url,this.channelType,e)},o.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new $e(this._iid,this.url,this.channelType,e)},o.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new S(this._iid,this.url,this.channelType,e)},o.prototype.addOperators=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return F(Z("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new et({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},o.prototype.removeOperators=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return F(Z("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new tt({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},o.prototype.getMyMutedInfo=function(){return U(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,u,c,l;return I(this,(function(h){switch(h.label){case 0:return e=m.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new nt({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return a=h.sent(),i=a.as(rt),s=i.isMuted,o=i.startAt,u=i.endAt,c=i.remainingDuration,l=i.description,[2,{isMuted:s,startAt:o,endAt:u,remainingDuration:c,description:l}]}}))}))},o.prototype.getMetaData=function(e){return U(this,void 0,void 0,(function(){var t,n,r,a,i,s;return I(this,(function(o){switch(o.label){case 0:return F(Z("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new at({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=o.sent(),a=r.as(it),i=a.metadata,s=a.ts,this._upsertCachedMetaData(i,s),[2,i]}}))}))},o.prototype.getAllMetaData=function(){return U(this,void 0,void 0,(function(){var e,t,n,r,a,i;return I(this,(function(s){switch(s.label){case 0:return e=m.of(this._iid).requestQueue,t=new at({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(it),a=r.metadata,i=r.ts,this._upsertCachedMetaData(a,i),[2,a]}}))}))},o.prototype.createMetaData=function(e){return U(this,void 0,void 0,(function(){var t,n,r,a;return I(this,(function(i){switch(i.label){case 0:return t=m.of(this._iid).requestQueue,n=new X({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(J).metaData,this._upsertCachedMetaData(a,0),[2,a]}}))}))},o.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),U(this,void 0,void 0,(function(){var n,r,a,i,s,o;return I(this,(function(u){switch(u.label){case 0:return n=m.of(this._iid).requestQueue,r=new Ce({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return a=u.sent(),i=a.as(Me),s=i.metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}}))}))},o.prototype.deleteMetaData=function(e){return U(this,void 0,void 0,(function(){var t,n,r,a;return I(this,(function(i){switch(i.label){case 0:return F(Y("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new st({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(ot).ts,this._removeFromCachedMetaData([e],a),[2]}}))}))},o.prototype.deleteAllMetaData=function(){return U(this,void 0,void 0,(function(){var e,t,n,r;return I(this,(function(a){switch(a.label){case 0:return e=m.of(this._iid).requestQueue,t=new ut({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=a.sent(),r=n.as(ct).ts,this._removeFromCachedMetaData($([],ee(this._cachedMetaData.keys()),!1),r),[2]}}))}))},o.prototype.getMetaCounters=function(e){return U(this,void 0,void 0,(function(){var t,n,r;return I(this,(function(a){switch(a.label){case 0:return F(Z("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new lt({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(ht).metaCounter]}}))}))},o.prototype.getAllMetaCounters=function(){return U(this,void 0,void 0,(function(){var e,t,n;return I(this,(function(r){switch(r.label){case 0:return e=m.of(this._iid).requestQueue,t=new lt({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(ht).metaCounter]}}))}))},o.prototype.createMetaCounters=function(e){return U(this,void 0,void 0,(function(){var t,n,r;return I(this,(function(a){switch(a.label){case 0:return t=m.of(this._iid).requestQueue,n=new dt({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(pt).metaCounter]}}))}))},o.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),U(this,void 0,void 0,(function(){var n,r,a;return I(this,(function(i){switch(i.label){case 0:return n=m.of(this._iid).requestQueue,r=new Se({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(be).metaCounter]}}))}))},o.prototype.increaseMetaCounters=function(e){return U(this,void 0,void 0,(function(){var t,n,r;return I(this,(function(a){switch(a.label){case 0:return t=m.of(this._iid).requestQueue,n=new Se({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(be).metaCounter]}}))}))},o.prototype.decreaseMetaCounters=function(e){return U(this,void 0,void 0,(function(){var t,n,r;return I(this,(function(a){switch(a.label){case 0:return t=m.of(this._iid).requestQueue,n=new Se({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return r=a.sent(),[2,r.as(be).metaCounter]}}))}))},o.prototype.deleteMetaCounter=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return F(Y("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new ft({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},o.prototype.deleteAllMetaCounters=function(){return U(this,void 0,void 0,(function(){var e,t;return I(this,(function(n){switch(n.label){case 0:return e=m.of(this._iid).requestQueue,t=new mt({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},o.prototype.muteUser=function(e,t,n){return U(this,void 0,void 0,(function(){return I(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},o.prototype.muteUserWithUserId=function(e,t,n){return U(this,void 0,void 0,(function(){var r,a;return I(this,(function(i){switch(i.label){case 0:return F(Y("string",e)&&Y("number",t,!0)&&Y("string",n,!0)).throw(N.invalidParameters),r=m.of(this._iid).requestQueue,a=new ve({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},o.prototype.unmuteUser=function(e){return U(this,void 0,void 0,(function(){return I(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},o.prototype.unmuteUserWithUserId=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return F(Y("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new ye({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},o.prototype.banUser=function(e,t,n){return U(this,void 0,void 0,(function(){return I(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},o.prototype.banUserWithUserId=function(e,t,n){return U(this,void 0,void 0,(function(){var r,a;return I(this,(function(i){switch(i.label){case 0:return F(Y("string",e)&&Y("number",t,!0)&&Y("string",n,!0)).throw(N.invalidParameters),r=m.of(this._iid).requestQueue,a=new Ee({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},o.prototype.unbanUser=function(e){return U(this,void 0,void 0,(function(){return I(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},o.prototype.unbanUserWithUserId=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return F(Y("string",e)).throw(N.invalidParameters),t=m.of(this._iid).requestQueue,n=new Ue({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},o.prototype.freeze=function(){return U(this,void 0,void 0,(function(){var e,t;return I(this,(function(n){switch(n.label){case 0:return e=m.of(this._iid).requestQueue,t=new we({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},o.prototype.unfreeze=function(){return U(this,void 0,void 0,(function(){var e,t;return I(this,(function(n){switch(n.label){case 0:return e=m.of(this._iid).requestQueue,t=new we({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},o.prototype.getMessagesByTimestamp=function(e,t){return U(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return F(Y("number",e)&&t instanceof te).throw(N.invalidParameters),[4,j.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,t)];case 1:return[2,n.sent()]}}))}))},o.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return U(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return F(Y("number",e)&&t instanceof ne).throw(N.invalidParameters),[4,j.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,t)];case 1:return[2,n.sent()]}}))}))},o.prototype.getMessageChangeLogsSinceToken=function(e,t){return U(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return F(Y("string",e)&&t instanceof ne).throw(N.invalidParameters),[4,j.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,t)];case 1:return[2,n.sent()]}}))}))},o.prototype._createPendingSendableMessagePayload=function(e,n,r){var a=m.of(this._iid).sessionManager;return t({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return b.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?P.payloadify(e.appleCriticalAlertOptions):null,created_at:r,user:D.payloadify(a.currentUser),req_id:n,request_state:R.PENDING,requested_mention_user_ids:e.mentionedUserIds})},o.prototype._createPendingUserMessage=function(e,n,a){var i,s;void 0===a&&(a=Date.now());var o={};if(e.translationTargetLanguages)try{for(var u=L(e.translationTargetLanguages),c=u.next();!c.done;c=u.next()){o[c.value]=""}}catch(e){i={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}var l=t(r(r({},this._createPendingSendableMessagePayload(e,n,a)),{type:q.USER,message:e.message,translations:o})),h=new f(this._iid,l);return h.messageParams=e,h},o.prototype._createPendingFileMessage=function(e,n,a){void 0===a&&(a=Date.now());var i=t(r(r({},this._createPendingSendableMessagePayload(e,n,a)),{type:q.FILE,url:"string"==typeof e.file?e.file:"",file:{name:e.fileName,size:e.fileSize,type:e.mimeType,data:e.data},thumbnails:e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}}))})),s=new g(this._iid,i);return s.messageParams=e,s},o.prototype._markMessageAsFailed=function(e,t){var n=m.of(this._iid).cacheContext;e.errorCode=t.code,n.localCacheEnabled&&k(t.code)||(e.requestState=t.code!==H.REQUEST_CANCELED?R.FAILED:R.CANCELED)},o.prototype.sendUserMessage=function(e){var t,n=this;F(e instanceof B).throw(N.invalidParameters),O(2).then((function(){var t=n._createPendingUserMessage(e,o);i.dispatch(new Q({messages:[t],source:G.EVENT_MESSAGE_SENT_PENDING})),V((function(){return U(n,void 0,void 0,(function(){return I(this,(function(e){return[2,u._trigger(null,t)]}))}))}))})).catch((function(e){throw e}));var a=m.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=null!==(t=e.reqId)&&void 0!==t?t:this._generateRequestId(),u=new W,c=new De(r({channelUrl:this.url,channelType:this.channelType,requestId:o},e));return s.send(c).then((function(e){var t=e.as(Re).message;i.dispatch(new Q({messages:[t],source:G.EVENT_MESSAGE_SENT_SUCCESS})),V((function(){return U(n,void 0,void 0,(function(){return I(this,(function(e){return[2,u._trigger(null,t)]}))}))}))})).catch((function(t){if(z(t))throw t;O(2).then((function(){var r=n._createPendingUserMessage(e,o);n._markMessageAsFailed(r,t),i.dispatch(new Q({messages:[r],source:G.EVENT_MESSAGE_SENT_FAILED})),V((function(){return U(n,void 0,void 0,(function(){return I(this,(function(e){return[2,u._trigger(t,r.isResendable?r:null)]}))}))}))})).catch((function(e){throw e}))})),u},o.prototype._autoResendUserMessage=function(e){var t=this;F(e instanceof f).throw(N.invalidParameters);var n=m.of(this._iid).logger;n.debug("autoResendUserMessage",e);var a=m.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=e.reqId,u=new W,c=e.messageParams,l=new De(r({channelUrl:this.url,channelType:this.channelType,requestId:o},e.messageParams));return n.debug("autoResendUserMessage request",l),s.send(l).then((function(e){var r=e.as(Re).message;n.debug("autoResendUserMessage success",r),i.dispatch(new Q({messages:[r],source:G.EVENT_MESSAGE_SENT_SUCCESS})),V((function(){return U(t,void 0,void 0,(function(){return I(this,(function(e){return[2,u._trigger(null,r)]}))}))}))})).catch((function(e){if(n.debug("autoResendUserMessage failed",e),z(e))throw e;O(2).then((function(){var n=t._createPendingUserMessage(c,o);t._markMessageAsFailed(n,e),i.dispatch(new Q({messages:[n],source:k(e.code)?G.REQUEST_RESEND_MESSAGE:G.EVENT_MESSAGE_SENT_FAILED})),V((function(){return U(t,void 0,void 0,(function(){return I(this,(function(t){return[2,u._trigger(e,n.isResendable?n:null)]}))}))}))})).catch((function(e){throw e}))})),u},o.prototype.resendUserMessage=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){return F(e instanceof f).throw(N.invalidParameters),t=new re,n=B._fromFailedUserMessage(e),this.sendUserMessage(n).onFailed((function(e){return t.reject(e)})).onSucceeded((function(e){return t.resolve(e)})),[2,t.promise]}))}))},o.prototype.updateUserMessage=function(e,t){return U(this,void 0,void 0,(function(){var n,a,i,s,o,u;return I(this,(function(c){switch(c.label){case 0:return F(Y("number",e)&&t instanceof ae&&t.validate()).throw(N.invalidParameters),n=m.of(this._iid),a=n.dispatcher,i=n.requestQueue,s=new qe(r({channelType:this.channelType,channelUrl:this.url,messageId:e},t)),[4,i.send(s)];case 1:return o=c.sent(),u=o.as(ke).message,a.dispatch(new Q({messages:[u],source:G.EVENT_MESSAGE_UPDATED})),[2,u]}}))}))},o.prototype.copyUserMessage=function(e,t){return U(this,void 0,void 0,(function(){var n,a;return I(this,(function(i){return F(e instanceof o&&t instanceof f&&e.url===t.channelUrl).throw(N.invalidParameters),n=new re,a=new B(r(r({},t),{mentionType:t.mentionType,mentionedUserIds:t.mentionedUsers.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(t.translations),pushNotificationDeliveryOption:d.DEFAULT,parentMessageId:null,isReplyToChannel:!1})),e.sendUserMessage(a).onSucceeded((function(e){return n.resolve(e)})).onFailed((function(e){return n.reject(e)})),[2,n.promise]}))}))},o.prototype.translateUserMessage=function(e,t){return U(this,void 0,void 0,(function(){var n,r,a;return I(this,(function(i){switch(i.label){case 0:return F(e instanceof f&&e.messageId>0&&Z("string",t)).throw(N.invalidParameters),n=m.of(this._iid).requestQueue,r=new It({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(wt).message]}}))}))},o.prototype.sendFileMessage=function(e){var t,n=this;F(e instanceof x).throw(N.invalidParameters);var r=m.of(this._iid).dispatcher,a=j.of(this._iid).fileMessageQueue,i=Date.now(),s=null!==(t=e.reqId)&&void 0!==t?t:this._generateRequestId(),o=new W;return O(2).then((function(){var t=n._createPendingFileMessage(e,s,i);r.dispatch(new Q({messages:[t],source:G.EVENT_MESSAGE_SENT_PENDING})),V((function(){return U(n,void 0,void 0,(function(){return I(this,(function(e){return[2,o._trigger(null,t)]}))}))}))})).catch((function(e){throw e})),a.request(this,s,e).then((function(e){r.dispatch(new Q({messages:[e],source:G.EVENT_MESSAGE_SENT_SUCCESS})),V((function(){return U(n,void 0,void 0,(function(){return I(this,(function(t){return[2,o._trigger(null,e)]}))}))}))})).catch((function(t){if(z(t))throw t;O(2).then((function(){var a=n._createPendingFileMessage(e,s,i);n._markMessageAsFailed(a,t),r.dispatch(new Q({messages:[a],source:G.EVENT_MESSAGE_SENT_FAILED})),V((function(){return U(n,void 0,void 0,(function(){return I(this,(function(e){return[2,o._trigger(t,a.isResendable?a:null)]}))}))}))})).catch((function(e){throw e}))})),o},o.prototype._autoResendFileMessage=function(e){var t=this;F(e instanceof g).throw(N.invalidParameters);var n=m.of(this._iid).dispatcher,r=j.of(this._iid).fileMessageQueue,a=e.createdAt,i=e.reqId,s=new W,o=e.messageParams;return r.request(this,i,o).then((function(e){n.dispatch(new Q({messages:[e],source:G.EVENT_MESSAGE_SENT_SUCCESS})),V((function(){return U(t,void 0,void 0,(function(){return I(this,(function(t){return[2,s._trigger(null,e)]}))}))}))})).catch((function(e){if(z(e))throw e;O(2).then((function(){var r=t._createPendingFileMessage(o,i,a);t._markMessageAsFailed(r,e),n.dispatch(new Q({messages:[r],source:k(e.code)?G.REQUEST_RESEND_MESSAGE:G.EVENT_MESSAGE_SENT_FAILED})),V((function(){return U(t,void 0,void 0,(function(){return I(this,(function(t){return[2,s._trigger(e,r.isResendable?r:null)]}))}))}))})).catch((function(e){throw e}))})),s},o.prototype.sendFileMessages=function(e){var t,n;F(e.every((function(e){return e instanceof x}))).throw(N.invalidParameters);var r=new W;try{for(var a=L(e),i=a.next();!i.done;i=a.next()){var s=i.value;this.sendFileMessage(s).onPending((function(e){return r._trigger(null,e)})).onFailed((function(e,t){return r._trigger(e,t)})).onSucceeded((function(e){return r._trigger(null,e)}))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},o.prototype.resendFileMessage=function(e,t){return U(this,void 0,void 0,(function(){var n,r;return I(this,(function(a){return F(e instanceof g&&t instanceof Blob).throw(N.invalidParameters),n=new re,r=x._fromFailedFileMessage(e,t),this.sendFileMessage(r).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},o.prototype.updateFileMessage=function(e,t){return U(this,void 0,void 0,(function(){var n,a,i,s,o,u;return I(this,(function(c){switch(c.label){case 0:return F(Y("number",e)&&t instanceof ie).throw(N.invalidParameters),n=m.of(this._iid),a=n.dispatcher,i=n.requestQueue,s=new He(r({channelType:this.channelType,channelUrl:this.url,messageId:e},t)),[4,i.send(s)];case 1:return o=c.sent(),u=o.as(Fe).message,a.dispatch(new Q({messages:[u],source:G.EVENT_MESSAGE_UPDATED})),[2,u]}}))}))},o.prototype.cancelUploadingFileMessage=function(e){return U(this,void 0,void 0,(function(){return I(this,(function(t){return F(Y("string",e)).throw(N.invalidParameters),j.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},o.prototype.copyFileMessage=function(e,t){return U(this,void 0,void 0,(function(){var n,a;return I(this,(function(i){return F(e instanceof o&&t instanceof g&&e.url===t.channelUrl).throw(N.invalidParameters),n=new re,a=new x(r(r({},t),{file:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,mentionType:t.mentionType,mentionedUserIds:t.mentionedUsers.map((function(e){return e.userId})),pushNotificationDeliveryOption:d.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:t.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))})),e.sendFileMessage(a).onSucceeded((function(e){return n.resolve(e)})).onFailed((function(e){return n.reject(e)})),[2,n.promise]}))}))},o.prototype.deleteMessage=function(e){return U(this,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return F(e instanceof se).throw(N.invalidParameters),e.messageId>0?(t=m.of(this._iid).requestQueue,n=new Qe({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},o.prototype.addReaction=function(e,t){return U(this,void 0,void 0,(function(){var n,r,a;return I(this,(function(i){switch(i.label){case 0:return F(e instanceof oe&&e.messageId>0&&Y("string",t)).throw(N.invalidParameters),n=m.of(this._iid).requestQueue,r=new gt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(Et).reactionEvent]}}))}))},o.prototype.deleteReaction=function(e,t){return U(this,void 0,void 0,(function(){var n,r,a;return I(this,(function(i){switch(i.label){case 0:return F(e instanceof oe&&e.messageId>0&&Y("string",t)).throw(N.invalidParameters),n=m.of(this._iid).requestQueue,r=new Tt({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return a=i.sent(),[2,a.as(Ut).reactionEvent]}}))}))},o.prototype._updateMessageMetaArray=function(e,t,n,r){return U(this,void 0,void 0,(function(){var a,i,s,o,u,c;return I(this,(function(l){switch(l.label){case 0:return a=m.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=new qe({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{metaArrays:t,mode:n,upsert:r}}),[4,s.send(o)];case 1:return u=l.sent(),c=u.as(ke).message,i.dispatch(new Q({messages:[c],source:G.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},o.prototype.createMessageMetaArrayKeys=function(e,t){return U(this,void 0,void 0,(function(){var n;return I(this,(function(r){return F(e instanceof se&&e.messageId>0&&Z("string",t)).throw(N.invalidParameters),n=t.map((function(e){return new b({key:e})})),[2,this._updateMessageMetaArray(e.messageId,n,"add",!0)]}))}))},o.prototype.deleteMessageMetaArrayKeys=function(e,t){return U(this,void 0,void 0,(function(){var n;return I(this,(function(r){return F(e instanceof se&&e.messageId>0&&Z("string",t)).throw(N.invalidParameters),n=t.map((function(e){return new b({key:e})})),[2,this._updateMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},o.prototype.addMessageMetaArrayValues=function(e,t){return U(this,void 0,void 0,(function(){return I(this,(function(n){return F(e instanceof se&&e.messageId>0&&t.every((function(e){return e instanceof b}))).throw(N.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"add",!0)]}))}))},o.prototype.removeMessageMetaArrayValues=function(e,t){return U(this,void 0,void 0,(function(){return I(this,(function(n){return F(e instanceof se&&e.messageId>0&&t.every((function(e){return e instanceof b}))).throw(N.invalidParameters),[2,this._updateMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},o.prototype.report=function(t,n){return U(this,void 0,void 0,(function(){var r,a,i,s;return I(this,(function(o){switch(o.label){case 0:return F(e(Ge,t)&&Y("string",n)).throw(N.invalidParameters),r=m.of(this._iid),a=r.sdkState,i=r.requestQueue,s=new vt({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:t,description:n}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},o.prototype.reportUser=function(t,n,r){return U(this,void 0,void 0,(function(){var i,s,o,u;return I(this,(function(c){switch(c.label){case 0:return F(t instanceof a&&e(Ge,n)&&Y("string",r)).throw(N.invalidParameters),i=m.of(this._iid),s=i.sdkState,o=i.requestQueue,u=new _t({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.userId,category:n,description:r}),[4,o.send(u)];case 1:return c.sent(),[2]}}))}))},o.prototype.reportMessage=function(t,n,r){return U(this,void 0,void 0,(function(){var a,i,s,o;return I(this,(function(u){switch(u.label){case 0:return F(t instanceof se&&e(Ge,n)&&Y("string",r)).throw(N.invalidParameters),a=m.of(this._iid),i=a.sdkState,s=a.requestQueue,o=new yt({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:t.sender.userId,messageId:t.messageId,category:n,description:r}),[4,s.send(o)];case 1:return u.sent(),[2]}}))}))},o}(K);export{Le as A,$e as B,pe as C,Ve as D,Ne as F,Ze as M,Be as O,Ge as R,xe as T,Pe as U,Nt as a,he as b,le as c,ue as d,Ae as e,Ie as f,Te as g,ce as h,_e as i,ge as j,fe as k,me as l,ze as m,ke as n,Fe as o,Oe as p,Re as q};
